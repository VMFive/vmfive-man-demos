<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>VMFive ADN Web SDK Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <style>
    body { font-family: sans-serif; }
    body { margin: 0; padding: 0; }
    .page-container { width: 90%; max-width: 500px; margin: 10px auto; }
  </style>
</head>

<body>
  <div class="page-container">
    <h2>第五代虛擬科技／技術起家 橫跨五大領域</h2>
    <h4>經濟日報 記者馬瑞璿／台北報導</h4>

    <p>第五代虛擬科技（VMFive）以互動遊戲廣告技術起家，後又以原生影音廣告為業務主力，以技術層面分析，互動遊戲廣告技術所需技術含量較高，整體技術需橫跨虛擬化、雲端、串流、跨平台、大數據等五領域，這也是VMFive命名由來。</p>
    <p>為什麼互動遊戲廣告需要的技術含量高？VMFive旗下的AdPlay主攻行動互動遊戲市場，行動市場必須考量連線能力、處理器架構與各廠牌手機繪圖能力，因此，主要技術領域集中在串流、虛擬化與跨平台三大領域。</p>
    <p>VMFive創辦人暨執行長丁俊宏表示，AdPlay串流到各個網址，可以在PC、NB、手機、平板等各類裝置上使用這個App。然而，這個串流體驗必須相當即時，因為所有的點擊都會在雲端上進行運算，必須在100-200毫秒內完成人機互動，這考驗著串流能力；而雲端也必須模擬手機處理器架構。目前手機處理器架構都是以ARM為主，要雲端來運算ARM架構也有些難度。此外，雖然App架設在雲端上，但最後連結的終端產品性能各有不同，必須因應不同設備去做解碼，甚至必須配合低階手機調整呈現品質，要在偵測用戶手機的同時，進行動態演算調節，在在都有技術難度。</p>
    <p>原生影音廣告技術含量就稍微低一些，丁俊宏表示，影音廣告著重串流、API（應用程式介面）、資料定向三大類技術，串流技術必須流暢才能降低延遲，並在不到1秒內的時間把廣告載入、完成串流，讓消費者觀看廣告，同時，也要提供API讓開發商組合成需要的格式，提升體驗效果，最後，也要在龐大的廣告資料裡面分析定向受眾，未來才能精準投遞目標客群。</p>

    <div id="vmfive-ad-unit-container-55667788"></div>
    <div id="vmfive-ad-unit-container-55667788-interstitial"></div>
    <h3>執行長丁俊宏 來場不一樣的創業</h3>

    <p>走進第五代虛擬科技（VMFive）位於南京東路上的辦公室，空間設計帶有淡淡的loft風卻讓人備感溫馨，創辦人暨執行長丁俊宏是七年級生，斯文的外表下卻帶有創業的堅定。他說，他想做點與別人不同的事。為什麼想要創業？他說，「我小時候就對科學家有憧憬，喜歡看愛因斯坦、愛迪生的故事，我也喜歡看科幻電影，喜歡回到未來、時光機的那種，創業對我來說是一種憧憬，可以做一些不一樣的事情、甚至作一些創新的東西」。</p>
    <p>在創立VMFive前，丁俊宏已經設立過二家公司，一家公司主要作行動應用開發，另外一家公司則是做壽險軟體；當時，壽險軟體獲得許多良好迴響，但丁俊宏希望自己可以做一點走向全球的事，於是，他決定把公司交給團隊夥伴經營，自己出來開設另外一家公司，VMFive於焉誕生。</p>
    <p>第五代虛擬科技團隊草創初期，一部分人在台北、一部分在新竹，有些人是學生、有些人是社會新鮮人，直到2014年才在台北設辦公室。「一開始，大家都沒經驗，只有我先前創立過別間公司、有一點的經驗，而且我又是CEO，所以大多以我的想法為主，創立初期，大家多少都會有意見相佐的時候，默契不見得這麼好，但到了營運中期之後，我慢慢授權經營團隊，讓大家自主發揮」，丁俊宏回憶道。</p>
    <p>丁俊宏設定三年內在亞太地區互動遊戲廣告市場闖出一片天，他對自家的技術相當有信心，現階段目標是讓VMFive把市場做大、做好，並希望這家公司可以永續經營。</p>
    <hr/>
    <p>文章來源：<a href="https://money.udn.com/money/story/11150/2478372">經濟日報</a></p>

    <script>
      var TemplateBuilder=function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/adformats",t(t.s=0)}([function(module,exports){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),TemplateBuilder=function(){function TemplateBuilder(e){_classCallCheck(this,TemplateBuilder),this.defaultConfig={cdn:'https://d2v4tz4zvhrua.cloudfront.net/production/dist/2019-05-07-1557206750347',plugins:[],adformats:[],components:[],develop:!0,showCreateButton:!0,BaseAdUnit:[],OnBaseAdUnitPrepared:[],BaseFormatsCode:[],OnBaseComponentsCode:[]},this.config=_extends({},this.defaultConfig,e),this.refs={},this.init()}return _createClass(TemplateBuilder,[{key:'appendCdnScript',value:function(){var e=this,t=e.config.develop,n=t?'../src':e.config.cdn;e.config.plugins.forEach(function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)}),e.config.adformats.forEach(function(e){e=t?e+'.js':e+'.min.js';var a=document.createElement("script");a.src=n+'/adformats/'+e,document.body.appendChild(a)}),e.config.components.forEach(function(e){e=t?e+'.js':e+'.min.js';var a=document.createElement("script");a.src=n+'/components/'+e,document.body.appendChild(a)})}},{key:'appendCustomJs',value:function appendCustomJs(){var self=this,sc=document.createElement("script");sc.src="https://d1v69ngg41pvl6.cloudfront.net/dist/MixPlayer.js",sc.onload=function(){var DynamicClass=function e(t,n){return _classCallCheck(this,e),new t(n)},fakeBannerContainerOption={el:'#vmfive-ad-unit-container-55667788',request_id:'55667788',track_url:'[{"event":"view","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=view"},                {"event":"impression","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=impression"},                {"event":"video_percentage:0","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=video_percentage:0"},                {"event":"video_percentage:25","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=video_percentage:25"},                {"event":"video_percentage:50","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=video_percentage:50"},                {"event":"video_percentage:75","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=video_percentage:75"},                {"event":"video_percentage:100","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=video_percentage:100"},                {"event":"click","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=click"},                {"event":"close","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=close"},                {"event":"replay","url":"https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=replay"}]',downloaded_pixel:'https://vaser-track.vm5apis.com/v2/track?requestId=&event=downloaded&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0','text:cta_in_new_window':'',dfp_url:'',cta_prefix_url:'https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=click','text:banner_bottom_offset':'0','text:scale':'1','text:show_close_mode':'fadein'},fakeInterstitialOption={el:'#vmfive-ad-unit-container-55667788',request_id:fakeBannerContainerOption.request_id,track_url:fakeBannerContainerOption.track_url,downloaded_pixel:fakeBannerContainerOption.downloaded_pixel},fakeInterstitialEXPSNDOption={el:'#vmfive-ad-unit-container-55667788-interstitial',request_id:fakeBannerContainerOption.request_id+'-interstitial',track_url:fakeBannerContainerOption.track_url,downloaded_pixel:fakeBannerContainerOption.downloaded_pixel},fakeNativeStaticOption={el:'#vmfive-ad-unit-container-55667788',request_id:fakeBannerContainerOption.request_id,track_url:fakeBannerContainerOption.track_url,downloaded_pixel:fakeBannerContainerOption.downloaded_pixel},firstContainerName=void 0,isFirstContainer=!0,BaseAdUnitCallbacks=self.config.BaseAdUnit&&Array.isArray(self.config.BaseAdUnit)?self.config.BaseAdUnit:[];BaseAdUnitCallbacks.forEach(function(callback,index){var isAdformat=callback.toString().match(/adformatName(.*?),/g);isAdformat||(self.config.BaseFormatsCode.push({extraFunction:callback}),callback(self));var adUnitContainer=void 0;if('function'==typeof callback&&isAdformat){adUnitContainer=callback(self),self.config.BaseFormatsCode.push({adformatName:adUnitContainer.adformatName,refName:adUnitContainer.refName,option:adUnitContainer.option}),isFirstContainer&&(firstContainerName=adUnitContainer.refName,isFirstContainer=!1);var currentOption=void 0;currentOption='BannerContainer'===adUnitContainer.refName||'BannerContainer2'===adUnitContainer.refName?_extends({},adUnitContainer.option,fakeBannerContainerOption):'Interstitial'===adUnitContainer.refName&&0===index?_extends({},adUnitContainer.option,fakeInterstitialOption):'InterstitialStatic'===adUnitContainer.refName&&0===index?_extends({},adUnitContainer.option,fakeInterstitialOption):'Interstitial'===adUnitContainer.refName||'InterstitialStatic'===adUnitContainer.refName?_extends({},adUnitContainer.option,fakeInterstitialEXPSNDOption):'NativeStatic'===adUnitContainer.refName?_extends({},adUnitContainer.option,fakeNativeStaticOption):_extends({},adUnitContainer.option,fakeBannerContainerOption),self.refs[adUnitContainer.refName]=new DynamicClass(eval(adUnitContainer.adformatName),currentOption)}});var fakeComponentOption={request_id:self.refs[firstContainerName].config.request_id,track_url:self.refs[firstContainerName].config.track_url,downloaded_pixel:self.refs[firstContainerName].config.downloaded_pixel,dfp_url:self.refs[firstContainerName].config.dfp_url,cta_prefix_url:self.refs[firstContainerName].config.cta_prefix_url,'cta:default':self.refs[firstContainerName].config['cta:default']},OnBaseAdUnitPreparedCallbacks=self.config.OnBaseAdUnitPrepared&&Array.isArray(self.config.OnBaseAdUnitPrepared)?self.config.OnBaseAdUnitPrepared:[];OnBaseAdUnitPreparedCallbacks.forEach(function(callback){var isComponent=callback.toString().match(/componentName(.*?),/g);isComponent||(self.config.OnBaseComponentsCode.push({extraFunction:callback}),callback(self));var elToString=void 0,hasEl=callback.toString().match(/el:(.*?),/g);if(hasEl){var elUnCall=callback.toString().match(/el:(.*?),/g).toString();elToString=elUnCall.replace(/el: self\.refs\['/g,'').replace(/\']/g,'El').replace(/,/g,'')}var originalToString=void 0,expandedToString=void 0,isExpandHelper=callback.toString().match(/componentName: 'ExpandHelper'/g);if(isExpandHelper){var originalUnCall=callback.toString().match(/original:(.*?),/g).toString();originalToString=originalUnCall.replace(/original: self\.refs\['/g,'').replace(/\']/g,'El').replace(/,/g,'');var expandedUnCall=callback.toString().match(/expanded:(.*?),/g).toString();expandedToString=expandedUnCall.replace(/expanded: self\.refs\['/g,'').replace(/\']/g,'El').replace(/,/g,'')}if('function'==typeof callback&&isComponent){var item=callback(self),currentComOption=_extends({},item.option,fakeComponentOption);hasEl&&(item.option.el=elToString),isExpandHelper&&(item.option.original=originalToString,item.option.expanded=expandedToString),self.config.OnBaseComponentsCode.push({componentName:item.componentName,refName:item.refName,option:item.option}),self.refs[item.refName]=new DynamicClass(eval(item.componentName),currentComOption)}})},document.body.appendChild(sc)}},{key:'stringifyOption',value:function(e){return JSON.stringify(e,function(e,t){if('function'==typeof t){var n=t.toString();return n=n.replace(/\r\n/g,""),n=n.replace(/\n/g,""),'thisisforfunction'+(n=n.replace(/\s+/g," "))+'thisisforfunction'}return t})}},{key:'stringifyOptionTest',value:function(e){return JSON.stringify(e,function(e,t){if('function'==typeof t){var n=t.toString();return n=n.replace(/\r\n/g,""),n=n.replace(/\n/g,""),'thisisforfunction'+(n=n.replace(/\s+/g," "))+'thisisforfunction'}return t})}},{key:'createTemplate',value:function(e,t,n){var a=this,i=a.config.cdn,r='';a.config.BaseFormatsCode.forEach(function(e,t){if(a.config.BaseFormatsCode[t].adformatName){var n=a.stringifyOption(a.config.BaseFormatsCode[t].option),i=n;i=i.replace(/,\"([^(\_|\:|\")"]+)\":/g,",$1:"),i=i.replace(/:\"([^(*)"]+)\",/g,":'$1',"),i=i.replace(/(thisisforfunction")|("thisisforfunction)/g,""),i=i.replace(/self\.refs\['(.*?)'\]/g,"$1El"),r=r+'let '+a.config.BaseFormatsCode[t].refName+'El = new '+a.config.BaseFormatsCode[t].adformatName+'('+i+');\n        '}else{var o=a.stringifyOptionTest(a.config.BaseFormatsCode[t].extraFunction);o=o.replace(/("thisisforfunctionfunction\(self\) \{)|(\}thisisforfunction")/g,""),o=o.replace(/self\.refs\['(.*?)'\]/g,"$1El"),r=r+o+'\n        '}});var o='';a.config.OnBaseComponentsCode.forEach(function(e,t){if(a.config.OnBaseComponentsCode[t].componentName){var n=a.stringifyOption(a.config.OnBaseComponentsCode[t].option),i=n;i=i.replace(/\"el\":\"(.*?)\",/g,"\"el\": $1,"),i=i.replace(/,\"([^(\_|\:|\")"]+)\":/g,",$1:"),i=i.replace(/{\"([^(\_|\:|\")"]+)\":/g,"{$1:"),i=i.replace(/:\"([^(*)"]+)\",/g,":'$1',"),i=i.replace(/(thisisforfunction")|("thisisforfunction)/g,""),i=i.replace(/self\.refs\['(.*?)'\]/g,"$1El"),'ExpandHelper'===a.config.OnBaseComponentsCode[t].componentName&&(i=i.replace(/:\"(.*?)\"/g,": $1"),i=i.replace(/:\'(.*?)\'/g,": $1")),o=o+'let '+a.config.OnBaseComponentsCode[t].refName+'El = new '+a.config.OnBaseComponentsCode[t].componentName+'('+i+');\n        '}else{var r=a.stringifyOption(a.config.OnBaseComponentsCode[t].extraFunction);r=r.replace(/("thisisforfunctionfunction\(self\) \{)|(\}thisisforfunction")/g,""),r=r.replace(/self\.refs\['(.*?)'\]/g,"$1El"),o=o+r+'\n        '}});var c='<script>\n    let sc = document.createElement("script");\n    sc.src = "https://d1v69ngg41pvl6.cloudfront.net/dist/MixPlayer.js";\n    sc.onload = function () {\n        '+r+o+'\n    };\n    document.body.appendChild(sc);\n<\/script>';return function(n,i){var r='',o='';return r=a.config.BaseFormatsCode.length>=2&&a.refs.Interstitial?'<div id="vmfive-ad-unit-container-[request_id]"></div>\n<div id="vmfive-ad-unit-container-[request_id]-interstitial"></div>\n':'<div id="vmfive-ad-unit-container-[request_id]"></div>\n',e.forEach(function(e){o=o+'<script src=\''+e+'\'><\/script>\n'}),t.forEach(function(e){o=o+'<script src=\''+n+'/adformats/'+e+'.min.js\'><\/script>\n'}),i.forEach(function(e){o=o+'<script src=\''+n+'/components/'+e+'.min.js\'><\/script>\n'}),r+o+c}(i,n)}},{key:'createCreateButton',value:function(){function e(){template.created()}var t=document.createElement('div');t.setAttribute('style','position:fixed;top:50px;left:2px;background:red;color: #000;width:60px;height:30px;border-radius: 15px;line-height: 28px;text-align: center;'),t.innerHTML='Create',document.body.appendChild(t),t.addEventListener('click',e,!1)}},{key:'init',value:function(){var e=this;e.appendCdnScript(),setTimeout(function(){e.appendCustomJs()},1e3),e.config.showCreateButton&&e.createCreateButton()}},{key:'created',value:function(){var e=this.createTemplate(this.config.plugins,this.config.adformats,this.config.components);e=e.replace(/>/g,'&gt;'),e=e.replace(/</g,'&lt;');var t=null;t=window.open('demo-code.html','Demo code','height=800,width=800,scrollbars=yes'),t.document.write('<figure><pre><code class="language-pascal" style="display: inline-block;">'+e+'</code></pre></figure>')}}]),TemplateBuilder}();try{module.exports=TemplateBuilder}catch(e){}}]);
      let template = new TemplateBuilder({
        cdn: 'https://d2v4tz4zvhrua.cloudfront.net/production/dist/2019-06-28-1561691998782',
        plugins: [
          'https://man.vm5apis.com/dist/anime.js/3.0.1/anime.min.js',
          'https://d1v69ngg41pvl6.cloudfront.net/dist/odometer.js/0.4.8/odometer.min.js'
        ],
        adformats: [
          'BannerContainer'
        ],
        components: [
          'Flyout', 'CloseButton', 'DynamicWeather'
        ],
        develop: false,
        showCreateButton: false,
        BaseAdUnit: [
          function(self) {
            console.log('before adformat, we need to dosomething === 1');
          },
          function(self) {
            return {
              adformatName: 'BannerContainer',
              refName: 'vmfiveAdUnitContainer',
              option : {
                'request_id': '[request_id]',
                'track_url': '[track_url]',

                'downloaded_pixel': 'https://vaser-track.vm5apis.com/v2/track?requestId=&event=downloaded&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0',
                'text:cta_in_new_window': '',
                'dfp_url': '',
                'cta_prefix_url': 'https://vaser-track.vm5apis.com/v2/track?requestId=&placementId=&campaignId=&audienceGroupId=&creativeId=&timezone=8&creativeFormat=richmedia&pixel=1&x=0&event=click',
                'cta:default': 'https://www.mcdonalds.com.tw/twmobile/ch/restaurant.html?utm_source=vmfive.com&utm_medium=display&utm_term=LBMcD&utm_content=0821_IcedAmericano_Flyout_VMFive&utm_campaign=VMFive_Flyout_IcedAmericano_0821',
                'text:banner_bottom_offset': `0`,
                'text:scale': `1`,
                'text:embedded': ``,
                'text:show_close_mode': `fadein`,

                'text:height_ratio': ``,

                'text:close_button_horizontal_alignment': 'left',

                bannerRatio: '32:10',
                videoBorderRadius: 0,
                enableClipPath: false,
              }
            };
          },
          function(self) {
            console.log('dosomething between adformat === 2 BannerContainer2', self.refs['vmfiveAdUnitContainer']);
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.zIndex = '1';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.position = 'absolute';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.left = '0';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.top = '0';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.backgroundImage = 'url(https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/ice_coffee.png)';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.backgroundSize = 'cover';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.backgroundRepeat = 'no-repeat';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.backgroundPosition = 'bottom';
            self.refs['vmfiveAdUnitContainer'].adContainerBg.style.width = '100%';

            let splashContainer = document.createElement('div');
            splashContainer.style.position = 'absolute';
            splashContainer.style.bottom = '0';
            splashContainer.style.left = '0';
            splashContainer.style.width = '100%';
            splashContainer.style.opacity = 0;

            let splashImg = document.createElement('img');
            // splashImg.src = 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/splashed_ice_coffee.png';
            splashImg.src = 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/splashed_ice_coffee_with_ices.png';
            splashImg.style.position = 'absolute';
            splashImg.style.left = '0%';
            splashImg.style.bottom = '0%';
            splashImg.style.width = '100%';
            splashContainer.appendChild(splashImg);

            self.refs['vmfiveAdUnitContainer'].adContainerBg.appendChild(splashContainer);

            let preloadImg = new Image();
            // preloadImg.src = 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/splashed_ice_coffee.png';
            preloadImg.src = 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/splashed_ice_coffee_with_ices.png';
            if (preloadImg.complete) {
                initFlyout();
            } else {
                preloadImg.onload = function() {
                    initFlyout();
                }
            }
            function initFlyout() {
            let contentEl = new Flyout({
                el: self.refs['vmfiveAdUnitContainer'].adContainerView,
                'request_id': self.refs['vmfiveAdUnitContainer'].config.request_id,

                'image:banner': 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/banner.png',
                // 'image:leader': 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/transparent_1x1.png',
                'image:leader': 'https://d2v4tz4zvhrua.cloudfront.net/manual_uploads/20190627/resource/mccafe/leader.png',
                'text:move_duration': `2000`,
                'text:banner_showup_delay': `1000`,

                'text:rise_or_drop': `drop`,
                'text:horizontal_density_level': `13`,
                'text:vertical_density_level': `10`,
                'text:fly_over_banner': `true`,
                'text:mass_vertical_elements': 'false',
                'text:mass_horizontal_elements': '',
                'text:shake_elements': `false`,

                onctaclicked: [
                  function(component, extra) {
  									self.refs['vmfiveAdUnitContainer'].onCtaClicked(extra.e);
                  },
                ],

                onflyoutstart: [
                function() {

                    let h = splashImg.getBoundingClientRect().height;
                    // console.log(splashImg.getBoundingClientRect());
                    // console.log(h);
                    splashContainer.style.overflow = 'hidden';

                    anime({
                      targets: [contentEl.flyingCarpet, contentEl.fastFlyingCarpet, contentEl.fasterFlyingCarpet],
                      opacity: [1, 0],
                      delay: (contentEl.config.startDelay + contentEl.config.moveDuration * contentEl.bannerEnterDelayCoef) * 1 + 150,
                      duration: 300,
                      easing: 'easeInQuint',
                    });

                    setTimeout(function() {
                      // 製造冰塊掉在杯內的感覺：一開始把 fly_over_banner 設為 true(z-index 會被設為 1)，在這個時間點再把它改回 0
                      contentEl.flyingCarpet.style.zIndex = 0;

                      splashContainer.style.height = h + 'px';
                      splashContainer.style.opacity = 1;

                      anime({
                        targets: self.refs['vmfiveAdUnitContainer'].adContainerBg,
                        opacity: [1, 0],
                        top: ['0', '100%'],
                        delay: 550,
                        easing: 'easeInOutSine',
                        });

                        let dynamicEl = new DynamicWeather({
                        el: contentEl.bannerView,
                        'request_id': self.refs['vmfiveAdUnitContainer'].config['request_id'],
                        'track_url':  self.refs['vmfiveAdUnitContainer'].config['track_url'],
                        enableUVI: false,
                        enableAQI: false,
                        enablePM2Dot5: false,
                        enableTemperature: true,
                        enableRainfall: false,

                        'text:top_percentage': '47',
                        'text:bottom_percentage': '',
                        'text:left_percentage': '',
                        'text:right_percentage': '10',

                        'text:dynamic_weather_title': '',
                        'text:dynamic_weather_text_right': '',

                        onprepared: [
                          function() {
                              let tempEl = dynamicEl.rootView.querySelector('#temperature');
                              tempEl.style.fontSize = '36px';
                              tempEl.style.fontStyle = 'italic';
                              tempEl.style.color = '#e37e24';
                          },
                        ],
                      });
                    }, (contentEl.config.startDelay + contentEl.config.moveDuration * contentEl.bannerEnterDelayCoef * 0.75));

                    // anime({
                    // targets: splashContainer,
                    // opacity: [0, 1],
                    // height: ['30%', h + 'px'],
                    // delay: (contentEl.config.startDelay + contentEl.config.moveDuration * contentEl.bannerEnterDelayCoef) * 1 + 100,
                    // easing: 'easeInOutSine',
                    // duration: 350,
                    // complete: function() {
                    //     anime({
                    //     targets: self.refs['vmfiveAdUnitContainer'].adContainerBg,
                    //     opacity: [1, 0],
                    //     top: ['0', '100%'],
                    //     delay: 550,
                    //     easing: 'easeInOutSine',
                    //     });
                    //
                    //     let dynamicEl = new DynamicWeather({
                    //     el: contentEl.bannerView,
                    //     'request_id': self.refs['vmfiveAdUnitContainer'].config['request_id'],
                    //     'track_url':  self.refs['vmfiveAdUnitContainer'].config['track_url'],
                    //     enableUVI: false,
                    //     enableAQI: false,
                    //     enablePM2Dot5: false,
                    //     enableTemperature: true,
                    //     enableRainfall: false,
                    //
                    //     'text:top_percentage': '47',
                    //     'text:bottom_percentage': '',
                    //     'text:left_percentage': '',
                    //     'text:right_percentage': '10',
                    //
                    //     'text:dynamic_weather_title': '',
                    //     'text:dynamic_weather_text_right': '',
                    //
                    //     onprepared: [
                    //       function() {
                    //           let tempEl = dynamicEl.rootView.querySelector('#temperature');
                    //           tempEl.style.fontSize = '36px';
                    //           tempEl.style.fontStyle = 'italic';
                    //           tempEl.style.color = '#e37e24';
                    //       },
                    //     ],
                    //     });
                    // }
                    // });
                },
                ],
            });
            }
          }
        ],
        OnBaseAdUnitPrepared: [
          function(self) {
            return {
              componentName: 'CloseButton',
              refName: 'CloseButton',
              option : {
                el: self.refs['vmfiveAdUnitContainer'].adContainerView,
                'request_id': '[request_id]',
                'track_url': '[track_url]',

                'text:cta_in_new_window': `[text:cta_in_new_window]`,
                'dfp_url': `[dfp_url]`,
                'cta_prefix_url': `[cta_prefix_url]`,
                'cta:default': `[cta:default]`,

                'text:embedded': '[text:embedded]',
                'text:show_close_mode': 'fadein',
                'text:close_button_horizontal_alignment': 'left',
                'text:beautify_percent': '80',
                closeMode: 'fate'
              }
            }
          },
          function(self) {
            console.log('we need to dosomething after component === 6 CloseButton', self.refs['CloseButton']);
          }
        ]
      });
    </script>
  </div>
</body>

</html>

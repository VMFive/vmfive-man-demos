var Transformer=function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/components/",e(e.s=0)}([function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t),this.defaultConfig={el:"#vmfive-ad-unit",videoEl:"#vmfive-ad-unit-native",bannerEl:"#vmfive-ad-unit-native-banner",showRate:.3,lockAfterTransform:!1,videoScale:"16:9",bannerScale:"16:9",padding:0,addGrid:!1,leaveTransform:!0,transform:"flip"},this.config=n({},this.defaultConfig,e),this.config=n({},this.config,{el:this.checkSelector(this.config.el),cardEl:this.checkSelector(this.config.cardEl),videoEl:this.checkSelector(this.config.videoEl),bannerEl:this.checkSelector(this.config.bannerEl)}),this.initData=this.initData.bind(this),this.resizeHandler=this.resizeHandler.bind(this),this.scrollExpandHandler=this.scrollExpandHandler.bind(this),this.attachEvents=this.attachEvents.bind(this),this.getElementMiddlePresentage=this.getElementMiddlePresentage.bind(this),this.setCss=this.setCss.bind(this),this.data=this.initData(this.config),this.init()}return a(t,[{key:"checkSelector",value:function(t){if(null===(t="string"==typeof t?document.querySelector(t):t))throw new Error("Something wrong with your elements param");return t}},{key:"initData",value:function(t){var e=t.padding,i=t.showRate,a=t.el,r=t.videoScale,o=t.bannerScale,s=void 0,l=void 0,d=void 0,h=void 0,c=void 0,f=void 0,u=void 0;l=a.getBoundingClientRect().width,s=l*(9/16),c=window.innerHeight||document.documentElement.clientHeight,f=window.innerWidth||document.documentElement.clientWidth,e=e;try{d=l*(+r.split(":")[1]/+r.split(":")[0]),h=l*(+o.split(":")[1]/+o.split(":")[0])}catch(t){console.log(t),d=l*(9/16),h=l*(9/16)}var v=c*(1-i)/2,m=c*((1-i)/2+i),g=e+s/2,p=c-g;return g=Math.min(g,v)-1,p=Math.max(p,m)+1,u=n({},t,{viewHeight:c,viewWidth:f,halfViewHeight:c/2,elWidth:l,elHeight:s,videoHeight:d,bannerHeight:h,padding:e,topLimit:g,bottomLimit:p,showAreaTop:v,showAreaBottom:m}),this.config.addGrid&&(this.removeElements("testline"),this.addGrid("red",e,c-e),this.addGrid("blue",u.topLimit,u.bottomLimit),this.addGrid("green",u.showAreaTop,u.showAreaBottom)),u}},{key:"init",value:function(){this.attachEvents(),this.setCss()}},{key:"setCss",value:function(){var t=this.data.el;switch(t.classList.add("transform"),this.data.transform){case"flip":t.classList.add("transform-flip")}}},{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.data.interval=setInterval(this.scrollExpandHandler,60)}},{key:"scrollExpandHandler",value:function(){var t=this.data,e=t.el,i=t.cardEl,n=(t.elHeight,t.videoEl),a=t.bannerEl,r=t.lockAfterTransform,o=t.interval,s=t.viewWidth,l=(t.viewHeight,t.videoHeight,t.leaveTransform),d=t.transform,h=this.getElementMiddlePresentage(),c=e.getBoundingClientRect();if(l||!(h>0)){switch(d){case"flip":i.style.transform="rotateX("+180*h+"deg)";break;case"slipFromRight":n.style.left=-(s-c.left)*h+"px";break;case"slipFromLeft":n.style.left=(s-c.left)*h+"px";break;case"scale":n.style.transform="scale("+(1-Math.abs(h))+")",a.style.transform="scale("+Math.abs(h)+")"}h>=0&&r&&clearInterval(o)}}},{key:"getElementMiddlePresentage",value:function(){var t=this.data,e=t.el,i=(t.viewHeight,t.halfViewHeight),n=(t.elWidth,t.elHeight,t.videoHeight,t.bannerHeight,t.padding,t.topLimit),a=t.bottomLimit,r=t.showAreaTop,o=t.showAreaBottom,s=void 0,l=e.getBoundingClientRect(),d=l.top+l.height/2;return d>i?(s=(d-o)/(a-o),s=-Math.min(1,Math.max(0,s))):(s=(d-r)/(n-r),s=Math.min(1,Math.max(0,s))),s}},{key:"addGrid",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){var i=document.createElement("div");i.classList.add("testline"),i.style.top=e+"px",i.style.backgroundColor=t,document.body.appendChild(i)})}},{key:"removeElements",value:function(t){for(var e=document.getElementsByClassName(t);e.length>0;)e[0].parentNode.removeChild(e[0])}},{key:"resizeHandler",value:function(){this.data=this.initData(this.data)}},{key:"destroy",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]);this.detachEvents(),t&&t.call(this)}}]),t}();try{t.exports=r}catch(t){}}]);